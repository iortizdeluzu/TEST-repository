name: github-actions-learn
run-name: ${{ github.actor }} is learning GitHub Actions
on: [push]
env:
SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}
REMOTE_HOST: atlas-edr.sw.ehu.es
REMOTE_USER: iortiz
jobs:
  check-bats-version:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '14'
            #- run: npm install -g bats
            #- run: npm install -g conda python3
            #- run: bats -v
        #- run: echo "Hello, world!" >> myfile.txt
      - run: git config --global user.name "ikerortiluzu"
      - run: git config --global user.mail "iker.ortiz@dipc.org"
        #- run: git add -A
        #- run: git commit -m "Auto updating"
        #- run: git fetch origin master
        #- run: git push origin main
      - run: pip install virtualenv
      - run: virtualenv mypython
      - run: source mypython/bin/activate
      - run: conda init bash
      - run: python -m pip --version
      - run: pip install -r requirements.txt 
      - run: mkdocs build
      # Hasta aqui corre
      - run: mkdocs build
      - run: git add -A
      - run: git commit -m "Auto updating"
      - run: git fetch origin master
      - run: git push origin main
      # Hasta aqui corre
      - run: |
             ssh-keyscan -H atlas-edr.sw.ehu.es >> .ssh/known_hosts
             sshpass -p "joderCONdipc123$%&" ssh-copy-id -o StrictHostKeyChecking=no iortiz@atlas-edr.sw.ehu.es

      
      
      
        #- run: rsync -r sites/ iortiz@atlas-edr.sw.ehu.es:/dipc/iortiz

